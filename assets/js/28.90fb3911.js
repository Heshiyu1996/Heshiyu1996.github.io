(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{384:function(t,s,a){t.exports=a.p+"assets/img/img-1.4f2d80c8.png"},385:function(t,s,a){t.exports=a.p+"assets/img/img-2.adce4312.png"},386:function(t,s,a){t.exports=a.p+"assets/img/img-3.22d47372.png"},418:function(t,s,a){"use strict";a.r(s);var n=a(29),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"react16基础知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react16基础知识"}},[t._v("#")]),t._v(" React16基础知识")]),t._v(" "),n("blockquote",[n("p",[t._v("react 16")])]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#react16基础知识"}},[t._v("React16基础知识")]),n("ul",[n("li",[n("a",{attrs:{href:"#新特性"}},[t._v("新特性")])]),n("li",[n("a",{attrs:{href:"#usecallback、usememo的区别"}},[t._v("useCallback、useMemo的区别")])]),n("li",[n("a",{attrs:{href:"#通过hooks获取上一个指定的prop值"}},[t._v("通过Hooks获取上一个指定的prop值")])]),n("li",[n("a",{attrs:{href:"#函数组件-与-class组件"}},[t._v("函数组件 与 class组件")])]),n("li",[n("a",{attrs:{href:"#react-hooks的优缺点"}},[t._v("React Hooks的优缺点")])]),n("li",[n("a",{attrs:{href:"#函数式编程"}},[t._v("函数式编程")])]),n("li",[n("a",{attrs:{href:"#hooks的管理机制"}},[t._v("Hooks的管理机制")])]),n("li",[n("a",{attrs:{href:"#参考链接"}},[t._v("参考链接")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"新特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新特性"}},[t._v("#")]),t._v(" 新特性")]),t._v(" "),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/skill/react/life-cycle/"}},[t._v("生命周期")]),t._v(" "),n("ul",[n("li",[t._v("设为"),n("code",[t._v("UN_SAFE")]),t._v("："),n("code",[t._v("componentWillMount")]),t._v("、"),n("code",[t._v("componentWillUpdate")]),t._v("、"),n("code",[t._v("componentWillReceiveProps")])]),t._v(" "),n("li",[t._v("推荐使用："),n("code",[t._v("getDerivedStateFromProps")]),t._v("、"),n("code",[t._v("getSnapshotBeforeUpdate")])])])],1),t._v(" "),n("li",[n("RouterLink",{attrs:{to:"/skill/react/hooks/"}},[t._v("Hooks")]),t._v(" "),n("ul",[n("li",[t._v("主要是解决"),n("code",[t._v("状态逻辑复用问题")]),t._v("，将组件的 UI 与 状态 分离。")])])],1),t._v(" "),n("li",[n("strong",[t._v("Context API")]),t._v(" "),n("ul",[n("li",[t._v("新的Context API采用 声明式写法，并且可以透过 "),n("strong",[n("code",[t._v("shouldComponentUpdate")]),t._v(" 返回 false 的组件")]),t._v("继续向下传播")])])]),t._v(" "),n("li",[n("strong",[t._v("代码分割")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("React.lazy")]),t._v(" 提供了"),n("code",[t._v("动态 import 组件")]),t._v("的能力，实现代码分割")]),t._v(" "),n("li",[n("code",[t._v("Suspense")]),t._v(" 作用：在等待组件时 suspend（暂停）渲染，并显示加载标识")])])]),t._v(" "),n("li",[n("strong",[t._v("错误处理机制")]),t._v(" "),n("ul",[n("li",[t._v("新增生命周期"),n("code",[t._v("componentDidCatch")])])])])]),t._v(" "),n("h2",{attrs:{id:"usecallback、usememo的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecallback、usememo的区别"}},[t._v("#")]),t._v(" useCallback、useMemo的区别")]),t._v(" "),n("p",[n("code",[t._v("useCallback")]),t._v("一般会用来缓存函数的引用；"),n("code",[t._v("useMemo")]),t._v("缓存计算数据的值。")]),t._v(" "),n("blockquote",[n("p",[t._v("它们都是根据 "),n("code",[t._v("依赖项")]),t._v(" 去进行缓存。前者是缓存callback，后者是缓存callback执行后返回的值。")])]),t._v(" "),n("h3",{attrs:{id:"usecallback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),n("p",[t._v("用法：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handleCount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("count")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖项为空代表这个函数在组件的生命周期内都会 **永久缓存**")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"usememo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),n("p",[t._v("用法：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" calcValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("v")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当count改变时，重新计算calcValue的值")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("blockquote",[n("p",[n("code",[t._v("useMemo")]),t._v("一般会 用来去缓存需要进行大量计算量的函数。")])]),t._v(" "),n("h2",{attrs:{id:"通过hooks获取上一个指定的prop值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过hooks获取上一个指定的prop值"}},[t._v("#")]),t._v(" 通过Hooks获取上一个指定的prop值")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// usePrevious.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("usePrevious")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ref "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ref"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ref"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("使用时：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevCalcValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePrevious")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("calcValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"函数组件-与-class组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数组件-与-class组件"}},[t._v("#")]),t._v(" 函数组件 与 class组件")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("方面")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("函数组件")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("class组件")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("定义方式")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("被定义为一个"),n("strong",[t._v("纯函数")]),t._v("。"),n("br"),t._v("它接收一个props对象，并返回"),n("code",[t._v("React Element")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("被定义为一个"),n("strong",[t._v("class")]),t._v("。"),n("br"),t._v("它继承于"),n("code",[t._v("React.Component")]),t._v("，并 "),n("strong",[t._v("通过render函数")]),t._v(" 返回"),n("code",[t._v("React Element")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("render行为"),n("br")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("每次组件触发更新："),n("br"),n("strong",[t._v("拥有完全独立的函数作用域")]),t._v("，"),n("br"),t._v("返回相应的"),n("code",[t._v("React Element")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("每次组件触发更新："),n("br"),t._v(" "),n("strong",[t._v("调用"),n("code",[t._v("render()")])]),t._v("，"),n("br"),t._v("返回"),n("code",[t._v("React Element")]),t._v(" "),n("br"),t._v("（对于同一处调用的class组件，"),n("strong",[t._v("只有一个class实例")]),t._v("被创建/使用，后续的render"),n("strong",[t._v("只会改变this.props、this.state的值")]),t._v("）")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("状态")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("没有自身的state。"),n("br"),t._v("（"),n("strong",[t._v("在v16.8添加了hooks，可以使用useState钩子去管理state")]),t._v("）")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("拥有自身的state")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("生命周期")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("没有生命周期。"),n("br"),t._v("（"),n("strong",[t._v("在v16.8后可通过"),n("code",[t._v("useEffect")]),t._v("去模拟部分生命周期")]),t._v("）")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("有")])])])]),t._v(" "),n("h2",{attrs:{id:"react-hooks的优缺点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks的优缺点"}},[t._v("#")]),t._v(" React Hooks的优缺点")]),t._v(" "),n("p",[n("strong",[t._v("优点：")])]),t._v(" "),n("ul",[n("li",[t._v("状态逻辑复用\n"),n("ul",[n("li",[t._v("通过组合"),n("code",[t._v("useState")]),t._v("、"),n("code",[t._v("useEffect")]),t._v("等去实现状态逻辑复用、避免分散在各个生命周期中")])])]),t._v(" "),n("li",[t._v("函数式编程")])]),t._v(" "),n("p",[n("strong",[t._v("缺点：")])]),t._v(" "),n("ul",[n("li",[t._v("调用顺序：\n"),n("ul",[n("li",[t._v("要在组件的最顶层使用，"),n("strong",[t._v("不能在class组件、循环、条件、回调内使用Hooks")])])])]),t._v(" "),n("li",[t._v("依赖声明的关键性\n"),n("ul",[n("li",[t._v("部分Hooks"),n("strong",[t._v("需要根据依赖来判断是否需要重新渲染")])])])])]),t._v(" "),n("h2",{attrs:{id:"函数式编程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数式编程"}},[t._v("#")]),t._v(" 函数式编程")]),t._v(" "),n("p",[n("code",[t._v("函数式编程")]),t._v("的特点：")]),t._v(" "),n("ul",[n("li",[t._v("函数是第一等公民")]),t._v(" "),n("li",[t._v("没有副作用（不会影响外部变量）")]),t._v(" "),n("li",[t._v("引用透明（输入相同，输出也相同）")])]),t._v(" "),n("h2",{attrs:{id:"hooks的管理机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooks的管理机制"}},[t._v("#")]),t._v(" Hooks的管理机制")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("PersionInfo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("initialAge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("initialName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setAge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialAge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            Age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("age "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Growing up"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("问题：")]),t._v(" "),n("ul",[n("li",[t._v("多个"),n("code",[t._v("useState")]),t._v("，如何区分这两个状态？")]),t._v(" "),n("li",[t._v("每次重新渲染，如何获取最新状态？")]),t._v(" "),n("li",[t._v("为什么不能在 "),n("strong",[t._v("循环、条件、嵌套")]),t._v(" 里用 Hooks？")]),t._v(" "),n("li",[t._v("Hook的状态存在哪？")])]),t._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Hook "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    memoizedState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    baseState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    baseUpdate"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Update"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    queue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UpdateQueue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    next"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Hook "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指向下一个Hook")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[n("strong",[t._v("React认为Hook是一个链表（具有"),n("code",[t._v("next")]),t._v("属性）。")]),t._v(" 所以我们在组件里用到的Hooks是通过 "),n("strong",[t._v("链表")]),t._v(" 连接起来的（上一个Hook的"),n("code",[t._v("next")]),t._v("指向下一个Hook），这些Hooks节点利用单链表的结构串联在一起。")]),t._v(" "),n("h4",{attrs:{id:"多个usestate，如何区分两个状态？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多个usestate，如何区分两个状态？"}},[t._v("#")]),t._v(" 多个"),n("code",[t._v("useState")]),t._v("，如何区分两个状态？")]),t._v(" "),n("p",[t._v("答案：初次渲染时，每次调用Hooks方法，就会调用"),n("code",[t._v("mountState")]),t._v("。它内部会通过"),n("code",[t._v("mountWorkInProgressHook")]),t._v("去创建一个 Hook节点 ，并把它添加到 "),n("strong",[t._v("Hooks链表")]),t._v(" 上。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(384),alt:"alt"}})]),t._v(" "),n("h4",{attrs:{id:"每次重新渲染，如何获取最新状态？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#每次重新渲染，如何获取最新状态？"}},[t._v("#")]),t._v(" 每次重新渲染，如何获取最新状态？")]),t._v(" "),n("p",[t._v("答案：每个Hook节点都维护自身的 “"),n("code",[t._v("更新链表（queue）")]),t._v("”。通过queue来存放所有的历史更新操作。")]),t._v(" "),n("p",[t._v("在重新渲染时，会从 “"),n("code",[t._v("更新链表（queue）")]),t._v("” 的表头开始遍历，执行每一次更新，最后将最新的状态来返回，以保证每次重新渲染都能获得最新状态。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(385),alt:"alt"}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(386),alt:"alt"}})]),t._v(" "),n("h4",{attrs:{id:"为什么不能在嵌套、条件、循环里用hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么不能在嵌套、条件、循环里用hooks"}},[t._v("#")]),t._v(" 为什么不能在嵌套、条件、循环里用Hooks")]),t._v(" "),n("p",[t._v("答案：重新渲染时，每次调用Hooks方法，就会调用"),n("code",[t._v("updateState")]),t._v("。它内部会通过"),n("code",[t._v("updateWorkInProgressHook")]),t._v("去获取当前对应的链表节点（基于 "),n("code",[t._v("初次渲染时生成的 Hooks链表")]),t._v("的next）。")]),t._v(" "),n("p",[t._v("如果在条件语句中使用Hook，若不符合条件未执行对应"),n("code",[t._v("useState")]),t._v("，就会导致从 Hooks链表 中获取信息不正确。")]),t._v(" "),n("blockquote",[n("p",[t._v("初次渲染：state1 => hook1, state2 => hook2, state3 => hook3...")]),t._v(" "),n("p",[t._v("再次渲染：state1 => hook1, state3 => hooks2，乱套！")])]),t._v(" "),n("h4",{attrs:{id:"hook的状态存在哪？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook的状态存在哪？"}},[t._v("#")]),t._v(" Hook的状态存在哪？")]),t._v(" "),n("p",[t._v("答案：Hooks 链表会挂载到"),n("code",[t._v("FiberNode.memoizedState")])]),t._v(" "),n("blockquote",[n("p",[t._v("每个Fiber就是一个Virtual DOM，每个组件就对应Fiber树上对应的Fiber节点。")])]),t._v(" "),n("h4",{attrs:{id:"父hook引用子hook，它们内部hooks之间的执行顺序？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#父hook引用子hook，它们内部hooks之间的执行顺序？"}},[t._v("#")]),t._v(" 父Hook引用子Hook，它们内部Hooks之间的执行顺序？")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父Hook")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useEffect "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" useChild "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./useChild"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" childName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hsy"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会先输出子Hook内的useEffect")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App的effect"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("我是App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("childName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子Hook")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("childName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setChildName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"useChild的useEffect"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setChildName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" childName "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" useChild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://codesandbox.io/s/antd-reproduction-template-ft5cm?file=/index.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码示例"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("正解：")]),t._v(" 父Hook调用子Hook，其实也是把子Hook"),n("strong",[t._v("当做一个函数被调用")]),t._v("。（可以尝试将"),n("code",[t._v("const { childName } = useChild('hsy');")]),t._v("这行放到useEffect的下一行执行）")]),t._v(" "),n("blockquote",[n("p",[t._v("也就是说，将子Hook里的Hook“平摊”到子Hook被调用的地方，那随后会按按照类似“JS事件循环 - 微任务”的机制来处理父、子内部的这些Hook。")])]),t._v(" "),n("h2",{attrs:{id:"参考链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5dd64ae6f265da478b00e639",target:"_blank",rel:"noopener noreferrer"}},[t._v("useCallback、useMemo 分析 & 差别"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/64354455",target:"_blank",rel:"noopener noreferrer"}},[t._v("剖析useState的执行过程"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/vvjiang/p/12160791.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React中useEffect的源码解读"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5e5e66d6e51d4526e651c796#comment",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks源码解析，原来这么简单～"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/SunShinewyf/issue-blog/issues/50",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks 进阶"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);